<!-- Plugin Configuration File. Read more: https://plugins.jetbrains.com/docs/intellij/plugin-configuration-file.html -->
<idea-plugin>
    <id>com.github.phillco.talon</id>
    <name>Talon Language Support</name>
    <vendor email="support@example.com" url="https://github.com/phillco">phillco</vendor>

    <description><![CDATA[
      Talon language support for JetBrains IDEs.<br><br>
      
      <b>Features:</b><br>
      <ul>
        <li>Syntax highlighting for .talon files</li>
        <li>File type recognition</li>
        <li>Basic code structure</li>
        <li>Comment support</li>
      </ul>
      
      <br>
      Talon is a hands-free programming language for voice coding.
    ]]></description>

    <depends>com.intellij.modules.platform</depends>

    <resource-bundle>messages.TalonBundle</resource-bundle>

    <extensions defaultExtensionNs="com.intellij">
        <!-- File type registration -->
        <fileType
                name="Talon"
                implementationClass="com.github.phillco.talon.TalonFileType"
                fieldName="INSTANCE"
                language="Talon"
                extensions="talon"/>
                
        <!-- Language registration -->
        <lang.parserDefinition
                language="Talon"
                implementationClass="com.github.phillco.talon.parser.TalonParserDefinition"/>
                
        <!-- Syntax highlighting -->
        <lang.syntaxHighlighterFactory
                language="Talon"
                implementationClass="com.github.phillco.talon.highlighting.TalonSyntaxHighlighterFactory"/>
                
        <!-- Commenter -->
        <lang.commenter
                language="Talon"
                implementationClass="com.github.phillco.talon.TalonCommenter"/>
                
        <!-- Bracket matching -->
        <lang.braceMatcher
                language="Talon"
                implementationClass="com.github.phillco.talon.TalonBraceMatcher"/>
                
        <!-- Code folding -->
        <lang.foldingBuilder
                language="Talon"
                implementationClass="com.github.phillco.talon.folding.TalonFoldingBuilder"/>
                
    </extensions>
    
    <actions>
        <!-- Smart comment action that replaces default for Talon files -->
        <action id="Talon.SmartComment"
                class="com.github.phillco.talon.actions.TalonSmartCommentAction"
                text="Comment with Line Comment"
                description="Smart comment that comments entire rule when on key line">
            <!-- Override the default comment action for Talon files -->
            <override-text place="MainMenu" text="Comment with Line Comment"/>
            <add-to-group group-id="CommentGroup" anchor="first"/>
            <keyboard-shortcut keymap="$default" first-keystroke="ctrl SLASH"/>
            <keyboard-shortcut keymap="Mac OS X" first-keystroke="meta SLASH"/>
            <keyboard-shortcut keymap="Mac OS X 10.5+" first-keystroke="meta SLASH"/>
        </action>
        
        <!-- Comment entire rule action (separate action) -->
        <action id="Talon.CommentEntireRule"
                class="com.github.phillco.talon.actions.CommentEntireRuleAction"
                text="Comment Entire Talon Rule"
                description="Comment or uncomment an entire Talon rule">
            <add-to-group group-id="CommentGroup" anchor="after" relative-to-action="CommentByLineComment"/>
            <keyboard-shortcut keymap="$default" first-keystroke="ctrl shift SLASH"/>
        </action>
    </actions>
</idea-plugin>